<!DOCTYPE html>
<html lang="en" class="govuk-template">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cookies - Lex API</title>
    <meta name="description" content="Cookie policy for Lex API - learn about the cookies we use and manage your preferences.">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Import Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="/i-dot-ai-logo.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/i-dot-ai-logo.svg">

    <!-- PostHog Analytics (controlled by cookie consent) -->
    {% if posthog_key %}
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('{{ posthog_key }}', {
            api_host: '{{ posthog_host }}',
            person_profiles: 'identified_only',
            persistence: 'cookie',
            disable_cookie: false,
            disable_session_recording: true,
            disable_surveys: true,
            autocapture: true,
            capture_pageview: false,
            opt_out_capturing_by_default: true,
        });
    </script>
    {% endif %}

    <!-- Link shared styles from index.html -->
    <link rel="stylesheet" href="/styles.css">

    <style>
        /* Reuse the same GOV.UK Design System styles from index.html */
        /* i.AI Design System - Based on GOV.UK Frontend 5.9.0 */

        /* Base template styles */
        .govuk-template {
            background-color: #0b0c0c;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        .govuk-template__body {
            background-color: #ffffff;
            color: #0b0c0c;
            font-family: Inter, arial, sans-serif;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Design tokens - Colours */
        :root {
            --govuk-text-colour: #0b0c0c;
            --govuk-link-colour: #c50878;
            --govuk-link-hover-colour: #9e0660;
            --govuk-focus-colour: #fd0;
            --govuk-border-colour: #b1b4b6;
            --govuk-success-colour: #00703c;
            --govuk-error-colour: #d4351c;
            --govuk-secondary-background: #f3f2f1;
            --iai-pink: #c50878;
            --iai-pink-hover: #9e0660;
            --iai-pink-dark: #4f0330;
        }

        /* Typography */
        .govuk-heading-xl {
            font-size: 32px;
            line-height: 1.09375;
            font-weight: 700;
            margin: 0 0 30px 0;
        }

        .govuk-heading-l {
            font-size: 24px;
            line-height: 1.04167;
            font-weight: 700;
            margin: 0 0 20px 0;
        }

        .govuk-heading-m {
            font-size: 18px;
            line-height: 1.11111;
            font-weight: 700;
            margin: 0 0 15px 0;
        }

        .govuk-heading-s {
            font-size: 16px;
            line-height: 1.25;
            font-weight: 700;
            margin: 0 0 15px 0;
        }

        .govuk-body,
        .govuk-body-m {
            font-size: 16px;
            line-height: 1.25;
            margin: 0 0 15px 0;
        }

        @media (min-width: 40.0625em) {
            .govuk-heading-xl {
                font-size: 48px;
                line-height: 1.04167;
                margin-bottom: 50px;
            }

            .govuk-heading-l {
                font-size: 36px;
                line-height: 1.11111;
                margin-bottom: 30px;
            }

            .govuk-heading-m {
                font-size: 24px;
                line-height: 1.25;
                margin-bottom: 20px;
            }

            .govuk-body {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
        }

        /* Width container */
        .govuk-width-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 15px;
        }

        @media (min-width: 40.0625em) {
            .govuk-width-container {
                padding: 0 30px;
            }
        }

        /* Main wrapper */
        .govuk-main-wrapper {
            padding-top: 20px;
            padding-bottom: 20px;
        }

        @media (min-width: 40.0625em) {
            .govuk-main-wrapper {
                padding-top: 40px;
                padding-bottom: 40px;
            }
        }

        /* Grid */
        .govuk-grid-row {
            margin-right: -15px;
            margin-left: -15px;
        }

        .govuk-grid-row::after {
            content: "";
            display: block;
            clear: both;
        }

        .govuk-grid-column-two-thirds {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }

        @media (min-width: 40.0625em) {
            .govuk-grid-column-two-thirds {
                width: 66.6667%;
                float: left;
            }
        }

        /* Links */
        .govuk-link {
            color: var(--govuk-link-colour);
            text-decoration: underline;
        }

        .govuk-link:hover {
            color: var(--govuk-link-hover-colour);
        }

        /* Back link */
        .govuk-back-link {
            font-size: 14px;
            line-height: 1.14286;
            font-family: Inter, arial, sans-serif;
            display: inline-block;
            position: relative;
            margin-top: 15px;
            margin-bottom: 15px;
            padding-left: 14px;
            border-bottom: 1px solid var(--govuk-text-colour);
            color: var(--govuk-text-colour);
            text-decoration: none;
        }

        .govuk-back-link:before {
            content: "";
            display: block;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            margin: auto 0;
            border-style: solid;
            border-color: transparent;
            -webkit-clip-path: polygon(0% 50%, 100% 100%, 100% 0%);
            clip-path: polygon(0% 50%, 100% 100%, 100% 0%);
            border-width: 5px 6px 5px 0;
            border-right-color: currentColor;
        }

        .govuk-back-link:hover {
            border-bottom-color: var(--govuk-link-hover-colour);
            color: var(--govuk-link-hover-colour);
        }

        /* Header (reuse from index) */
        .govuk-header {
            background: var(--govuk-text-colour);
            color: #ffffff;
            border-bottom: 5px solid var(--iai-pink);
        }

        .govuk-header__container {
            padding-top: 30px;
            padding-bottom: 30px;
        }

        .govuk-header__content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .govuk-header__service-name-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }

        .govuk-header__link--service-name {
            font-weight: 700;
            font-size: 30px;
            color: #ffffff;
            text-decoration: none;
        }

        .govuk-header__experiment-tag {
            background: var(--iai-pink);
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            padding: 4px 8px;
            margin-left: 18px;
        }

        .govuk-header__iai-logo img {
            height: 40px;
        }

        /* Table */
        .govuk-table {
            font-family: Inter, arial, sans-serif;
            font-size: 16px;
            line-height: 1.25;
            color: var(--govuk-text-colour);
            width: 100%;
            margin-bottom: 30px;
            border-spacing: 0;
            border-collapse: collapse;
        }

        .govuk-table__header,
        .govuk-table__cell {
            padding: 10px 20px 10px 0;
            border-bottom: 1px solid var(--govuk-border-colour);
            text-align: left;
            vertical-align: top;
        }

        .govuk-table__header {
            font-weight: 700;
        }

        .govuk-table__caption {
            font-weight: 700;
            display: table-caption;
            text-align: left;
        }

        /* Radios */
        .govuk-radios__item {
            display: block;
            position: relative;
            min-height: 40px;
            margin-bottom: 10px;
            padding-left: 40px;
            clear: left;
        }

        .govuk-radios__input {
            cursor: pointer;
            position: absolute;
            z-index: 1;
            top: -2px;
            left: -2px;
            width: 44px;
            height: 44px;
            margin: 0;
            opacity: 0;
        }

        .govuk-radios__label {
            display: inline-block;
            margin-bottom: 0;
            padding: 8px 15px 5px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .govuk-radios__label:before {
            content: "";
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            border: 2px solid currentColor;
            border-radius: 50%;
            background: transparent;
        }

        .govuk-radios__label:after {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            width: 0;
            height: 0;
            border: 10px solid currentColor;
            border-radius: 50%;
            opacity: 0;
            background: currentColor;
        }

        .govuk-radios__input:checked + .govuk-radios__label:after {
            opacity: 1;
        }

        .govuk-radios__input:focus + .govuk-radios__label:before {
            border-width: 4px;
            box-shadow: 0 0 0 4px var(--govuk-focus-colour);
        }

        /* Form group */
        .govuk-form-group {
            margin-bottom: 30px;
        }

        .govuk-fieldset__legend {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        /* Button */
        .govuk-button {
            font-family: Inter, arial, sans-serif;
            font-weight: 400;
            font-size: 16px;
            box-sizing: border-box;
            display: inline-block;
            position: relative;
            width: 100%;
            margin-top: 0;
            margin-bottom: 22px;
            padding: 8px 10px 7px;
            border: 2px solid transparent;
            border-radius: 0;
            color: #ffffff;
            background-color: var(--iai-pink);
            box-shadow: 0 2px 0 var(--iai-pink-dark);
            text-align: center;
            cursor: pointer;
            text-decoration: none;
        }

        .govuk-button:hover {
            background-color: var(--iai-pink-hover);
        }

        @media (min-width: 40.0625em) {
            .govuk-button {
                font-size: 19px;
                width: auto;
            }
        }

        /* Notification banner */
        .govuk-notification-banner {
            font-family: Inter, arial, sans-serif;
            font-size: 16px;
            line-height: 1.25;
            margin-bottom: 30px;
            border: 5px solid var(--govuk-border-colour);
            background-color: var(--govuk-secondary-background);
        }

        .govuk-notification-banner--success {
            border-color: var(--govuk-success-colour);
        }

        .govuk-notification-banner__header {
            padding: 10px 15px;
            background-color: var(--govuk-border-colour);
        }

        .govuk-notification-banner--success .govuk-notification-banner__header {
            background-color: var(--govuk-success-colour);
            color: #ffffff;
        }

        .govuk-notification-banner__title {
            font-size: 16px;
            font-weight: 700;
            margin: 0;
        }

        .govuk-notification-banner__content {
            padding: 15px;
        }
    </style>
</head>

<body class="govuk-template__body">
    <a href="#main-content" class="govuk-skip-link">Skip to main content</a>

    <header class="govuk-header" role="banner">
        <div class="govuk-header__container govuk-width-container">
            <div class="govuk-header__content">
                <div class="govuk-header__service-name-container">
                    <a href="/" class="govuk-header__link govuk-header__link--service-name">
                        Lex API
                    </a>
                    <span class="govuk-header__experiment-tag">EXPERIMENT</span>
                </div>
                <div class="govuk-header__iai-logo">
                    <a href="https://ai.gov.uk" aria-label="Incubator for AI" target="_blank" rel="noopener noreferrer">
                        <img src="https://ai.gov.uk/logos/i-dot-ai-reverse.svg" alt="i.AI - Incubator for Artificial Intelligence" />
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="govuk-width-container">
        <a href="/" class="govuk-back-link">Back</a>

        <main class="govuk-main-wrapper" id="main-content" role="main">
            <!-- Success banner (hidden by default, shown via JavaScript) -->
            <div id="cookie-success-banner" class="govuk-notification-banner govuk-notification-banner--success" role="alert" hidden>
                <div class="govuk-notification-banner__header">
                    <h2 class="govuk-notification-banner__title">Success</h2>
                </div>
                <div class="govuk-notification-banner__content">
                    <p class="govuk-body">You've set your cookie preferences.</p>
                </div>
            </div>

            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <h1 class="govuk-heading-xl">Cookies</h1>

                    <p class="govuk-body">Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>

                    <p class="govuk-body">We use cookies to make Lex API work and collect information about how you use our service.</p>

                    <h2 class="govuk-heading-l">Essential cookies</h2>

                    <p class="govuk-body">Essential cookies keep your information secure while you use Lex API. We do not need to ask permission to use them.</p>

                    <table class="govuk-table">
                        <caption class="govuk-table__caption govuk-table__caption--m">Essential cookies we use</caption>
                        <thead class="govuk-table__head">
                            <tr class="govuk-table__row">
                                <th scope="col" class="govuk-table__header">Name</th>
                                <th scope="col" class="govuk-table__header">Purpose</th>
                                <th scope="col" class="govuk-table__header">Expires</th>
                            </tr>
                        </thead>
                        <tbody class="govuk-table__body">
                            <tr class="govuk-table__row">
                                <th scope="row" class="govuk-table__header">lex_cookies_policy</th>
                                <td class="govuk-table__cell">Saves your cookie consent settings</td>
                                <td class="govuk-table__cell">1 year</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2 class="govuk-heading-l">Analytics cookies (optional)</h2>

                    <p class="govuk-body">With your permission, we use PostHog to collect data about how you use Lex API. This information helps us to improve our service.</p>

                    <p class="govuk-body">PostHog is hosted in the EU and complies with GDPR. We do not use this data to identify you personally.</p>

                    <p class="govuk-body">PostHog stores information about:</p>

                    <ul class="govuk-list govuk-list--bullet">
                        <li>the pages you visit on Lex API</li>
                        <li>how long you spend on each page</li>
                        <li>how you got to the service</li>
                        <li>what you click on while you're visiting the service</li>
                    </ul>

                    <table class="govuk-table">
                        <caption class="govuk-table__caption govuk-table__caption--m">Analytics cookies we use</caption>
                        <thead class="govuk-table__head">
                            <tr class="govuk-table__row">
                                <th scope="col" class="govuk-table__header">Name</th>
                                <th scope="col" class="govuk-table__header">Purpose</th>
                                <th scope="col" class="govuk-table__header">Expires</th>
                            </tr>
                        </thead>
                        <tbody class="govuk-table__body">
                            <tr class="govuk-table__row">
                                <th scope="row" class="govuk-table__header">ph_*</th>
                                <td class="govuk-table__cell">PostHog analytics cookies that help us understand how you use the service</td>
                                <td class="govuk-table__cell">1 year</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2 class="govuk-heading-l">Change your cookie settings</h2>

                    <form id="cookie-preferences-form">
                        <div class="govuk-form-group">
                            <fieldset class="govuk-fieldset">
                                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                    Do you want to accept analytics cookies?
                                </legend>
                                <div class="govuk-radios">
                                    <div class="govuk-radios__item">
                                        <input class="govuk-radios__input" id="analytics-yes" name="analytics" type="radio" value="yes">
                                        <label class="govuk-label govuk-radios__label" for="analytics-yes">
                                            Yes
                                        </label>
                                    </div>
                                    <div class="govuk-radios__item">
                                        <input class="govuk-radios__input" id="analytics-no" name="analytics" type="radio" value="no">
                                        <label class="govuk-label govuk-radios__label" for="analytics-no">
                                            No
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>

                        <button type="submit" class="govuk-button">Save cookie settings</button>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script src="/cookie-consent.js"></script>
    <script>
        // Cookies page specific functionality
        (function() {
            // Pre-select radio buttons based on current consent
            const consent = window.CookieConsent.getConsent();
            if (consent) {
                const analyticsValue = consent.analytics ? 'yes' : 'no';
                const radio = document.getElementById(`analytics-${analyticsValue}`);
                if (radio) {
                    radio.checked = true;
                }
            } else {
                // Default to 'no' if no consent set
                document.getElementById('analytics-no').checked = true;
            }

            // Handle form submission
            const form = document.getElementById('cookie-preferences-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();

                const analyticsValue = document.querySelector('input[name="analytics"]:checked').value;
                const analyticsConsent = analyticsValue === 'yes';

                // Save consent
                window.CookieConsent.setConsent({ analytics: analyticsConsent });

                // Initialize PostHog with new consent
                window.CookieConsent.initializePostHog(analyticsConsent);

                // Show success banner
                const banner = document.getElementById('cookie-success-banner');
                banner.removeAttribute('hidden');
                banner.focus();

                // Scroll to top to show banner
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        })();
    </script>
</body>
</html>
