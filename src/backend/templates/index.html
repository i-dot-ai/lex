<!DOCTYPE html>
<html lang="en" class="govuk-template">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lex API</title>
    <meta name="description" content="UK legal API for AI agents and researchers. Access comprehensive UK legislation and caselaw data with semantic search and Model Context Protocol integration.">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Import Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/i-dot-ai-logo.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/i-dot-ai-logo.svg">
    
    <!-- PostHog Analytics (anonymous, cookieless, EU region, GDPR compliant) -->
    {% if posthog_key %}
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('{{ posthog_key }}', {
            api_host: '{{ posthog_host }}',
            defaults: '2025-05-24',
            person_profiles: 'identified_only',
            disable_cookie: true,
            disable_session_recording: true,
            disable_surveys: true,
            autocapture: false,
            capture_pageview: false,
            opt_out_capturing_by_default: false,
        });
        
        // Anonymous page view tracking only
        posthog.capture('$pageview', {
            $current_url: window.location.href,
            page_title: document.title,
            anonymous: true
        });
    </script>
    {% endif %}
    
    <style>
        /* i.AI Design System - Based on GOV.UK Frontend 5.9.0 */
        
        /* Base template styles */
        .govuk-template {
            background-color: #0b0c0c;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        .govuk-template__body {
            background-color: #ffffff;
            color: #0b0c0c;
            font-family: Inter, arial, sans-serif;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Design tokens - Colours */
        :root {
            --govuk-text-colour: #0b0c0c;
            --govuk-link-colour: #c50878;
            --govuk-link-hover-colour: #9e0660;
            --govuk-focus-colour: #fd0;
            --govuk-border-colour: #b1b4b6;
            --govuk-success-colour: #00703c;
            --govuk-error-colour: #d4351c;
            --govuk-secondary-background: #f3f2f1;
            --iai-pink: #c50878;
            --iai-pink-hover: #9e0660;
            --iai-pink-dark: #4f0330;
        }
        
        /* Typography scale */
        .govuk-heading-xl {
            font-size: 32px;
            line-height: 1.09375;
            font-weight: 700;
            margin: 0 0 30px 0;
        }
        
        .govuk-heading-l {
            font-size: 24px;
            line-height: 1.04167;
            font-weight: 700;
            margin: 0 0 20px 0;
        }
        
        .govuk-heading-m {
            font-size: 18px;
            line-height: 1.11111;
            font-weight: 700;
            margin: 0 0 15px 0;
        }
        
        .govuk-heading-s {
            font-size: 16px;
            line-height: 1.25;
            font-weight: 700;
            margin: 0 0 15px 0;
        }
        
        .govuk-body,
        .govuk-body-m {
            font-size: 16px;
            line-height: 1.25;
            margin: 0 0 15px 0;
        }
        
        .govuk-body-s {
            font-size: 14px;
            line-height: 1.14286;
            margin: 0 0 15px 0;
        }
        
        .govuk-body-xs {
            font-size: 12px;
            line-height: 1.16667;
            margin: 0 0 15px 0;
        }
        
        /* Responsive typography */
        @media (min-width: 40.0625em) {
            .govuk-heading-xl {
                font-size: 48px;
                line-height: 1.04167;
                margin-bottom: 50px;
            }
            
            .govuk-heading-l {
                font-size: 36px;
                line-height: 1.11111;
                margin-bottom: 30px;
            }
            
            .govuk-heading-m {
                font-size: 24px;
                line-height: 1.25;
                margin-bottom: 20px;
            }
            
            .govuk-heading-s {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
            
            .govuk-body,
            .govuk-body-m {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
            
            .govuk-body-s {
                font-size: 16px;
                line-height: 1.25;
                margin-bottom: 20px;
            }
            
            .govuk-body-xs {
                font-size: 14px;
                line-height: 1.14286;
                margin-bottom: 15px;
            }
        }
        
        /* Skip link */
        .govuk-skip-link {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: 0;
            overflow: hidden;
            clip: rect(0 0 0 0);
            -webkit-clip-path: inset(50%);
            clip-path: inset(50%);
            white-space: nowrap;
            background-color: var(--govuk-focus-colour);
            border: 0;
            color: var(--govuk-text-colour);
            cursor: pointer;
            font-family: Inter, arial, sans-serif;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.14286;
            padding: 10px;
            text-decoration: none;
            z-index: 9999;
        }
        
        .govuk-skip-link:focus {
            position: static;
            width: auto;
            height: auto;
            margin: inherit;
            overflow: visible;
            clip: auto;
            -webkit-clip-path: none;
            clip-path: none;
            white-space: inherit;
        }
        
        /* Header */
        .govuk-header {
            background: var(--govuk-text-colour);
            color: #ffffff;
            border-bottom: 5px solid var(--iai-pink);
        }
        
        .govuk-header__container {
            padding-top: 30px;
            padding-bottom: 30px;
            position: relative;
        }
        
        .govuk-header__content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        
        .govuk-header__service-name-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        .govuk-header__experiment-tag {
            background: var(--iai-pink);
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            letter-spacing: 0.5px;
            padding: 4px 8px;
            margin-left: 18px;
            border-radius: 0;
        }
        
        .govuk-header__link--service-name {
            font-weight: 700;
            font-size: 30px;
            line-height: 1.11111;
            color: #ffffff;
            text-decoration: none;
            margin: 0;
        }
        
        .govuk-header__link--service-name:hover {
            text-decoration: underline;
            text-decoration-thickness: 3px;
            text-underline-offset: 0.1em;
        }
        
        .govuk-header__iai-logo {
            display: flex;
            align-items: center;
            margin-left: auto;
            padding-left: 30px;
        }
        
        .govuk-header__iai-logo img {
            height: 40px;
            width: auto;
            margin: 15px 0;
            display: block;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-header__container {
                padding-top: 35px;
                padding-bottom: 35px;
            }
            
            .govuk-header__link--service-name {
                font-size: 30px;
                line-height: 1.25;
            }
            
            .govuk-header__experiment-tag {
                font-size: 16px;
                margin-left: 20px;
            }
            
            .govuk-header__iai-logo img {
                height: 45px;
                margin: 20px 0;
            }
        }
        
        /* Width container */
        .govuk-width-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-width-container {
                padding: 0 30px;
            }
        }
        
        /* Main wrapper */
        .govuk-main-wrapper {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-main-wrapper {
                padding-top: 40px;
                padding-bottom: 40px;
            }
        }
        
        /* Grid system */
        .govuk-grid-row {
            margin-right: -15px;
            margin-left: -15px;
        }
        
        .govuk-grid-row::after {
            content: "";
            display: block;
            clear: both;
        }
        
        .govuk-grid-column-full {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-one-half {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-two-thirds {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-one-third {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-grid-column-one-half {
                width: 50%;
                float: left;
            }
            
            .govuk-grid-column-two-thirds {
                width: 66.6667%;
                float: left;
            }
            
            .govuk-grid-column-one-third {
                width: 33.3333%;
                float: left;
            }
        }
        
        /* Spacing utilities */
        .govuk-\!-margin-bottom-6 {
            margin-bottom: 30px !important;
        }
        
        .govuk-\!-margin-bottom-8 {
            margin-bottom: 50px !important;
        }
        
        .govuk-\!-margin-bottom-9 {
            margin-bottom: 60px !important;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-\!-margin-bottom-6 {
                margin-bottom: 30px !important;
            }
            
            .govuk-\!-margin-bottom-8 {
                margin-bottom: 50px !important;
            }
            
            .govuk-\!-margin-bottom-9 {
                margin-bottom: 60px !important;
            }
        }
        
        /* Links */
        .govuk-link {
            color: var(--govuk-link-colour);
            text-decoration: underline;
            text-decoration-thickness: max(1px, 0.0625rem);
            text-underline-offset: 0.1em;
        }
        
        .govuk-link:visited {
            color: var(--govuk-link-colour);
        }
        
        .govuk-link:hover {
            color: var(--govuk-link-hover-colour);
            text-decoration-thickness: max(3px, 0.1875rem, 0.12em);
        }
        
        .govuk-link:focus {
            color: var(--govuk-text-colour);
            background-color: var(--govuk-focus-colour);
            box-shadow: 0 -2px var(--govuk-focus-colour), 0 4px var(--govuk-text-colour);
            text-decoration: none;
            outline: 3px solid transparent;
        }
        
        /* Buttons */
        .govuk-button {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.1875;
            box-sizing: border-box;
            display: inline-block;
            position: relative;
            width: 100%;
            margin-top: 0;
            margin-right: 0;
            margin-left: 0;
            margin-bottom: 22px;
            padding: 8px 10px 7px;
            border: 2px solid transparent;
            border-radius: 0;
            color: #ffffff;
            background-color: var(--iai-pink);
            box-shadow: 0 2px 0 var(--iai-pink-dark);
            text-align: center;
            vertical-align: top;
            cursor: pointer;
            text-decoration: none;
        }
        
        .govuk-button:hover {
            background-color: var(--iai-pink-hover);
            box-shadow: 0 2px 0 var(--iai-pink-dark);
        }
        
        .govuk-button:focus {
            border-color: var(--govuk-focus-colour);
            outline: 3px solid transparent;
            box-shadow: inset 0 0 0 1px var(--govuk-focus-colour);
        }
        
        .govuk-button--secondary {
            background-color: var(--govuk-secondary-background);
            box-shadow: 0 2px 0 var(--govuk-border-colour);
            color: var(--govuk-text-colour);
        }
        
        .govuk-button--secondary:hover {
            background-color: #dbdad9;
            box-shadow: 0 2px 0 var(--govuk-border-colour);
        }
        
        @media (min-width: 40.0625em) {
            .govuk-button {
                font-size: 19px;
                line-height: 1;
                width: auto;
                margin-bottom: 32px;
            }
        }
        
        /* Notification banner */
        .govuk-notification-banner {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            margin-bottom: 30px;
            border: 5px solid var(--govuk-border-colour);
            background-color: var(--govuk-secondary-background);
        }
        
        .govuk-notification-banner__header {
            padding: 10px 15px;
            border-bottom: 1px solid transparent;
            background-color: var(--govuk-border-colour);
        }
        
        .govuk-notification-banner__title {
            font-size: 16px;
            font-weight: 700;
            line-height: 1.25;
            margin: 0;
            padding: 0;
        }
        
        .govuk-notification-banner__content {
            padding: 15px;
            color: var(--govuk-text-colour);
        }
        
        .govuk-notification-banner--success {
            border-color: var(--govuk-success-colour);
        }
        
        .govuk-notification-banner--success .govuk-notification-banner__header {
            background-color: var(--govuk-success-colour);
            color: #ffffff;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-notification-banner {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 50px;
            }
            
            .govuk-notification-banner__header {
                padding: 15px 20px;
            }
            
            .govuk-notification-banner__title {
                font-size: 19px;
                line-height: 1.31579;
            }
            
            .govuk-notification-banner__content {
                padding: 20px;
            }
        }
        
        /* Code blocks */
        .code-block {
            background-color: var(--govuk-secondary-background);
            border: 1px solid var(--govuk-border-colour);
            padding: 10px 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            font-weight: bold;
            line-height: 1.45;
            position: relative;
        }
        
        .code-block pre {
            margin: 0;
            padding: 0;
            background: none;
            border: 0;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
        }
        
        /* Copy button */
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border: 1px solid var(--iai-pink);
            background: transparent;
            color: var(--iai-pink);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 0;
            font-family: Inter, arial, sans-serif;
        }
        
        .copy-button:hover {
            background-color: var(--iai-pink);
            color: #ffffff;
        }
        
        .copy-button:focus {
            background-color: var(--govuk-focus-colour);
            border-color: var(--govuk-text-colour);
            color: var(--govuk-text-colour);
            outline: 3px solid transparent;
        }
        
        /* JSON syntax highlighting */
        .json-string { color: #0969da; }
        .json-number { color: #0550ae; }
        .json-boolean { color: #8250df; }
        .json-null { color: #656d76; }
        .json-key { color: #0969da; font-weight: 600; }
        .json-punctuation { color: #24292f; }
        
        /* Lists */
        .govuk-list {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            color: var(--govuk-text-colour);
            margin: 0 0 15px 0;
            padding-left: 20px;
        }
        
        .govuk-list--bullet {
            list-style-type: disc;
        }
        
        .govuk-list li {
            margin-bottom: 5px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-list {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
        }
        
        /* Footer */
        .govuk-footer {
            background: var(--govuk-text-colour);
            border-top: 1px solid var(--govuk-border-colour);
        }
        
        .govuk-footer__content-container {
            padding-top: 25px;
            padding-bottom: 15px;
        }
        
        .govuk-footer__content {
            color: #ffffff;
            text-align: center;
        }
        
        .govuk-footer__link {
            color: #ffffff;
            text-decoration: underline;
            text-decoration-thickness: max(1px, 0.0625rem);
            text-underline-offset: 0.1em;
        }
        
        .govuk-footer__link:hover {
            color: var(--iai-pink);
            text-decoration-thickness: max(3px, 0.1875rem, 0.12em);
        }
        
        @media (min-width: 40.0625em) {
            .govuk-footer__content-container {
                padding-top: 40px;
                padding-bottom: 25px;
            }
        }
        
        /* Focus states for all interactive elements */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus,
        a:focus {
            outline: 3px solid var(--govuk-focus-colour);
            outline-offset: 0;
        }
        
        /* Tab interface for MCP setup */
        .mcp-tabs {
            border: 2px solid var(--govuk-border-colour);
            border-radius: 0;
            background-color: var(--govuk-secondary-background);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .mcp-tabs__list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            border-bottom: 2px solid var(--govuk-border-colour);
            background-color: #ffffff;
        }
        
        .mcp-tabs__tab {
            background: none;
            border: none;
            padding: 15px 20px;
            font-family: Inter, arial, sans-serif;
            font-size: 16px;
            font-weight: 500;
            color: var(--govuk-text-colour);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            border-right: 1px solid var(--govuk-border-colour);
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .mcp-tabs__tab:last-child {
            border-right: none;
        }
        
        .mcp-tabs__tab:hover {
            background-color: var(--govuk-secondary-background);
            border-bottom-color: var(--govuk-border-colour);
            transform: translateY(-1px);
        }
        
        .mcp-tabs__tab--active {
            color: var(--iai-pink);
            border-bottom-color: var(--iai-pink);
            background-color: #ffffff;
            font-weight: 700;
            box-shadow: inset 0 3px 0 var(--iai-pink);
        }
        
        .mcp-tabs__tab-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
        
        .mcp-tabs__content {
            display: none;
            padding: 25px;
            background-color: #ffffff;
        }
        
        .mcp-tabs__content--active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (min-width: 40.0625em) {
            .mcp-tabs__tab {
                font-size: 16px;
                padding: 20px 30px;
            }
            
            .mcp-tabs__tab-icon {
                width: 24px;
                height: 24px;
            }
            
            .mcp-tabs__content {
                padding: 35px;
            }
        }

        /* Two column layout for API docs */
        .api-docs-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 40.0625em) {
            .api-docs-grid {
                grid-template-columns: 1fr 1fr;
                gap: 30px;
            }
        }

        /* GitHub card styling */
        .github-card {
            border: 2px solid var(--govuk-border-colour);
            border-radius: 0;
            padding: 20px;
            background-color: #ffffff;
            margin-bottom: 30px;
            transition: border-color 0.3s ease;
        }
        
        .github-card:hover {
            border-color: var(--iai-pink);
        }
        
        .github-card__header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .github-card__icon {
            width: 32px;
            height: 32px;
            flex-shrink: 0;
        }
        
        .github-card__title {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
            color: var(--govuk-text-colour);
            line-height: 1.11111;
        }
        
        .github-card__description {
            margin-bottom: 20px;
            color: #505a5f;
        }
        
        .github-card__actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        @media (min-width: 40.0625em) {
            .github-card {
                padding: 30px;
            }
            
            .github-card__icon {
                width: 40px;
                height: 40px;
            }
            
            .github-card__title {
                font-size: 24px;
                line-height: 1.25;
            }
            
            .github-card__actions {
                flex-direction: row;
                gap: 15px;
            }
        }

        /* Accessibility helpers */
        .govuk-visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: hidden !important;
            clip: rect(0 0 0 0) !important;
            -webkit-clip-path: inset(50%) !important;
            clip-path: inset(50%) !important;
            white-space: nowrap !important;
        }
        
        /* Print styles */
        @media print {
            .govuk-template {
                background: #ffffff;
            }
            
            .govuk-template__body {
                font-size: 14pt;
                line-height: 1.15;
            }
            
            .govuk-header,
            .govuk-footer {
                display: none;
            }
            
            .govuk-link {
                color: #000000;
            }
            
            .code-block {
                background: #ffffff;
                border: 1pt solid #000000;
            }
            
            .copy-button {
                display: none;
            }
        }
        
        /* Reduce motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>

<body class="govuk-template__body">
    <a href="#main-content" class="govuk-skip-link">Skip to main content</a>

    <header class="govuk-header" role="banner">
        <div class="govuk-header__container govuk-width-container">
            <div class="govuk-header__content">
                <div class="govuk-header__service-name-container">
                    <a href="/" class="govuk-header__link govuk-header__link--service-name">
                        Lex API
                    </a>
                    <span class="govuk-header__experiment-tag">EXPERIMENT</span>
                </div>
                <div class="govuk-header__iai-logo">
                    <a href="https://ai.gov.uk" aria-label="Incubator for AI" target="_blank" rel="noopener noreferrer">
                        <img src="https://ai.gov.uk/logos/i-dot-ai-reverse.svg" alt="i.AI - Incubator for Artificial Intelligence" />
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="govuk-width-container">
        <main class="govuk-main-wrapper" id="main-content" role="main">
            
            <!-- Hero section -->
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <p class="govuk-body">UK legal API for AI agents and researchers. Access comprehensive UK legislation and caselaw data with semantic search and Model Context Protocol integration.</p>
                    <p class="govuk-body">Our API provides programmatic access to millions of UK legal documents, court decisions, and statutory instruments with advanced semantic search capabilities, making it easier than ever to build AI-powered legal applications and conduct comprehensive legal analysis.</p>
                    <p class="govuk-body">This API is hosted as an experimental service and should not be used as a production dependency.</p>
                </div>
                <div class="govuk-grid-column-one-third">
                    <!-- Notification banner -->
                    <div class="govuk-notification-banner govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title">
                        <div class="govuk-notification-banner__header">
                            <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                                Important
                            </h2>
                        </div>
                        <div class="govuk-notification-banner__content">
                            <p class="govuk-notification-banner__heading">
                                This API is for research and non-production use. Rate limited to 60 requests per minute, 1000 per hour per IP address.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MCP Setup section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">Model Context Protocol Setup</h2>
                    <p class="govuk-body">Connect the Lex API to AI assistants via Model Context Protocol for seamless legal research integration.</p>
                    
                    <!-- Tab interface -->
                    <div class="mcp-tabs">
                        <ul class="mcp-tabs__list" role="tablist">
                            <li role="presentation">
                                <button class="mcp-tabs__tab mcp-tabs__tab--active" 
                                        role="tab" 
                                        aria-selected="true" 
                                        aria-controls="claude-panel" 
                                        id="claude-tab"
                                        onclick="switchTab('claude')">
                                    <img src="/claude.svg" alt="Claude" class="mcp-tabs__tab-icon">
                                    Claude Desktop
                                </button>
                            </li>
                            <li role="presentation">
                                <button class="mcp-tabs__tab" 
                                        role="tab" 
                                        aria-selected="false" 
                                        aria-controls="copilot-panel" 
                                        id="copilot-tab"
                                        onclick="switchTab('copilot')">
                                    <img src="/copilot.svg" alt="Microsoft Copilot" class="mcp-tabs__tab-icon">
                                    Microsoft Copilot
                                </button>
                            </li>
                        </ul>
                        
                        <!-- Claude Desktop Configuration -->
                        <div id="claude-panel" class="mcp-tabs__content mcp-tabs__content--active" role="tabpanel" aria-labelledby="claude-tab">
                            <h3 class="govuk-heading-m">Claude Desktop Configuration</h3>
                            <p class="govuk-body">Add this configuration to your Claude Desktop configuration file:</p>
                            <p class="govuk-body-s"><strong>Config file location:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></p>
                            
                            <div class="code-block">
                                <button class="copy-button" onclick="copyToClipboard('claude-config')" aria-label="Copy Claude Desktop MCP configuration to clipboard">Copy</button>
                                <pre id="claude-config"><span class="json-punctuation">{</span>
  <span class="json-key">"mcpServers"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
    <span class="json-key">"lex"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
      <span class="json-key">"command"</span><span class="json-punctuation">:</span> <span class="json-string">"npx"</span><span class="json-punctuation">,</span>
      <span class="json-key">"args"</span><span class="json-punctuation">:</span> <span class="json-punctuation">[</span>
        <span class="json-string">"-y"</span><span class="json-punctuation">,</span>
        <span class="json-string">"mcp-remote@latest"</span><span class="json-punctuation">,</span>
        <span class="json-string">"https://lex-api.victoriousdesert-f8e685e0.uksouth.azurecontainerapps.io/mcp"</span>
      <span class="json-punctuation">]</span><span class="json-punctuation">,</span>
      <span class="json-key">"env"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{}</span>
    <span class="json-punctuation">}</span>
  <span class="json-punctuation">}</span>
<span class="json-punctuation">}</span></pre>
                            </div>
                        </div>
                        
                        <!-- Microsoft Copilot Configuration -->
                        <div id="copilot-panel" class="mcp-tabs__content" role="tabpanel" aria-labelledby="copilot-tab">
                            <h3 class="govuk-heading-m">Microsoft Copilot Studio Configuration</h3>
                            <p class="govuk-body">To use Lex API with Microsoft Copilot Studio, follow these steps:</p>
                            
                            <ol class="govuk-list govuk-list--number">
                                <li><strong>Access Copilot Studio:</strong> Go to your Microsoft Copilot Studio environment</li>
                                <li><strong>Create MCP Connection:</strong> Navigate to Tools → Add a tool → New tool → Model Context Protocol</li>
                                <li><strong>Configure Server URL:</strong> Enter the Lex API MCP endpoint URL</li>
                                <li><strong>Set Authentication:</strong> Configure API key authentication if required</li>
                            </ol>
                            
                            <div class="govuk-notification-banner" role="region">
                                <div class="govuk-notification-banner__header">
                                    <h4 class="govuk-notification-banner__title">Requirements</h4>
                                </div>
                                <div class="govuk-notification-banner__content">
                                    <ul class="govuk-list govuk-list--bullet">
                                        <li>Microsoft Copilot Studio access</li>
                                        <li>Generative Orchestration must be enabled</li>
                                        <li>Streamable transport support (current standard)</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <p class="govuk-body-s"><strong>Server URL:</strong></p>
                            <div class="code-block">
                                <button class="copy-button" onclick="copyToClipboard('copilot-url')" aria-label="Copy Microsoft Copilot MCP server URL to clipboard">Copy</button>
                                <pre id="copilot-url">https://lex-api.victoriousdesert-f8e685e0.uksouth.azurecontainerapps.io/mcp</pre>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- Dataset Coverage section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">Dataset Coverage</h2>
                    <p class="govuk-body">This experimental service provides access to comprehensive UK legal data for research and development purposes.</p>
                    
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Available Documents</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><strong id="acts-count">X</strong> Acts and Statutory Instruments</li>
                                <li><strong id="provisions-count">X</strong> individual legal provisions</li>
                                <li><strong id="judgments-count">X</strong> court judgments and decisions</li>
                                <li><strong id="paragraphs-count">X</strong> court case paragraphs</li>
                                <li><strong id="explanatory-count">X</strong> explanatory note sections</li>
                                <li><strong id="amendments-count">X</strong> legislative amendments</li>
                            </ul>
                            
                            <h3 class="govuk-heading-m">PDF Digitisation</h3>
                            <p class="govuk-body-s">Historical legislation digitised using AI for improved accessibility:</p>
                            <ul class="govuk-list govuk-list--bullet govuk-body-s">
                                <li><strong id="pdf-legislation-count">X</strong> PDF-sourced Acts (LLM extracted)</li>
                                <li><strong id="pdf-provisions-count">X</strong> PDF-sourced provisions (LLM extracted)</li>
                            </ul>
                        </div>
                        
                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Temporal Coverage</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><strong>Legislation:</strong> 1267-present (complete from 1963)</li>
                                <li><strong>Court cases:</strong> 2001-present</li>
                                <li><strong>Search capabilities:</strong> Both semantic and exact matching</li>
                                <li><strong>Updates:</strong> Dataset grows as new legislation and cases are published</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="govuk-inset-text">
                        <p>This service is provided for research and development. The dataset is updated regularly to include new legislation and court decisions as they become available.</p>
                    </div>
                </div>
            </div>

            <!-- API Documentation section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">API Documentation</h2>
                    <p class="govuk-body">Interactive API documentation with live examples and comprehensive endpoint details.</p>
                    
                    <div class="api-docs-grid govuk-!-margin-bottom-6">
                        <div>
                            <h3 class="govuk-heading-m">Swagger UI</h3>
                            <p class="govuk-body">Interactive API explorer with request and response examples for all endpoints.</p>
                            <a href="/api/docs" class="govuk-button" role="button" target="_blank" rel="noopener noreferrer">
                                View Swagger Documentation
                            </a>
                        </div>
                        
                        <div>
                            <h3 class="govuk-heading-m">ReDoc</h3>
                            <p class="govuk-body">Clean, reference-style documentation with detailed schemas and examples.</p>
                            <a href="/api/redoc" class="govuk-button" role="button" target="_blank" rel="noopener noreferrer">
                                View ReDoc Documentation
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Available Capabilities Section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">Available Capabilities</h2>
                    <p class="govuk-body">Once configured, AI assistants will have access to these comprehensive legal research capabilities:</p>
                    
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Legislation</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><code>search_for_legislation_acts</code> - Search UK legislation acts</li>
                                <li><code>search_for_legislation_sections</code> - Search within legislation sections</li>
                                <li><code>lookup_legislation</code> - Find legislation by reference</li>
                                <li><code>get_legislation_sections</code> - Get specific legislation sections</li>
                                <li><code>get_legislation_full_text</code> - Get full text of legislation</li>
                            </ul>
                            
                            <h3 class="govuk-heading-m">Amendments</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><code>search_amendments</code> - Search legislative amendments</li>
                                <li><code>search_amendment_sections</code> - Search amendment sections</li>
                            </ul>
                        </div>
                        
                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Caselaw</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><code>search_for_caselaw</code> - Search court cases and judgements</li>
                                <li><code>search_for_caselaw_section</code> - Search within case sections</li>
                                <li><code>search_for_caselaw_by_reference</code> - Find cases citing legislation/caselaw</li>
                            </ul>
                            
                            <h3 class="govuk-heading-m">Explanatory Notes</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><code>search_explanatory_note</code> - Search explanatory notes</li>
                                <li><code>get_explanatory_note_by_legislation</code> - Get notes for legislation</li>
                                <li><code>get_explanatory_note_by_section</code> - Get notes for specific sections</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GitHub Self-hosting section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <div class="github-card">
                        <div class="github-card__header">
                            <img src="/github.svg" alt="GitHub" class="github-card__icon">
                            <h2 class="github-card__title">Open Source & Self-Hosting</h2>
                        </div>
                        <p class="github-card__description govuk-body">
                            Want to host your own instance or contribute to development? Lex API is open source under MIT licence.
                        </p>
                        <div class="github-card__actions">
                            <a href="https://github.com/i-dot-ai/lex" 
                               class="govuk-button" 
                               target="_blank" 
                               rel="noopener noreferrer">
                                <span class="govuk-visually-hidden">Open </span>View Source Code
                            </a>
                            <a href="https://github.com/i-dot-ai/lex/blob/main/README.md#deployment" 
                               class="govuk-button govuk-button--secondary" 
                               target="_blank" 
                               rel="noopener noreferrer">
                                <span class="govuk-visually-hidden">View </span>Deployment Guide
                            </a>
                        </div>
                    </div>
                </div>
            </div>


        </main>
    </div>

    <footer class="govuk-footer" role="contentinfo">
        <div class="govuk-width-container">
            <div class="govuk-footer__content-container">
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-one-half">
                        <div class="govuk-footer__content">
                            <h3 class="govuk-heading-s" style="color: #ffffff; margin-bottom: 15px;">Acknowledgements</h3>
                            <p class="govuk-body-xs" style="color: #ffffff; margin-bottom: 10px;">
                                Thanks to our collaborators at <strong>The National Archives</strong> and <strong>Government Legal Department</strong>.
                            </p>
                            <p class="govuk-body-xs">
                                <a href="https://caselaw.nationalarchives.gov.uk/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">Find Case Law</a> • 
                                <a href="https://www.legislation.gov.uk/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">UK Legislation</a>
                            </p>
                        </div>
                    </div>
                    <div class="govuk-grid-column-one-half">
                        <div class="govuk-footer__content">
                            <p class="govuk-body-s">
                                Built by the <strong>Incubator for AI</strong> to harness AI for public good
                            </p>
                            <p class="govuk-body-s">
                                <a href="https://github.com/i-dot-ai/lex" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">GitHub</a> • 
                                <a href="https://github.com/i-dot-ai/lex/issues/new" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">Report a Bug</a> • 
                                <a href="https://ai.gov.uk/about/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">About i.AI</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.mcp-tabs__content');
            contents.forEach(content => {
                content.classList.remove('mcp-tabs__content--active');
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.mcp-tabs__tab');
            tabs.forEach(tab => {
                tab.classList.remove('mcp-tabs__tab--active');
                tab.setAttribute('aria-selected', 'false');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(tabName + '-panel');
            if (selectedContent) {
                selectedContent.classList.add('mcp-tabs__content--active');
            }
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.classList.add('mcp-tabs__tab--active');
                selectedTab.setAttribute('aria-selected', 'true');
            }
        }
        
        // Copy to clipboard functionality with proper error handling
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            if (!element) {
                console.error('Element not found:', elementId);
                return;
            }
            
            const text = element.textContent;
            
            // Clean JSON text by preserving structure
            const cleanText = text.trim();
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(cleanText).then(() => {
                    showCopyFeedback(element);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    fallbackCopy(cleanText);
                });
            } else {
                fallbackCopy(cleanText);
            }
        }
        
        function showCopyFeedback(element) {
            const btn = element.parentNode.querySelector('.copy-button');
            if (!btn) return;
            
            const originalText = btn.textContent;
            const originalBg = btn.style.backgroundColor;
            const originalColor = btn.style.color;
            
            btn.textContent = 'Copied!';
            btn.style.backgroundColor = '#00703c';
            btn.style.color = '#ffffff';
            btn.style.borderColor = '#00703c';
            
            // Announce to screen readers
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'govuk-visually-hidden';
            announcement.textContent = 'Configuration copied to clipboard';
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.backgroundColor = originalBg;
                btn.style.color = originalColor;
                btn.style.borderColor = '';
                document.body.removeChild(announcement);
            }, 2000);
        }
        
        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.top = '-9999px';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                console.log('Fallback copy successful');
            } catch (err) {
                console.error('Fallback copy failed: ', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        // Progressive enhancement check
        if (document.documentElement) {
            document.documentElement.className += ' govuk-frontend-supported';
        }
        
        // Focus management for skip link
        const skipLink = document.querySelector('.govuk-skip-link');
        const mainContent = document.getElementById('main-content');
        
        if (skipLink && mainContent) {
            skipLink.addEventListener('click', function(e) {
                e.preventDefault();
                mainContent.focus();
                mainContent.scrollIntoView({ behavior: 'smooth' });
            });
        }
        
        // Live stats fetching functionality
        async function updateLiveStats() {
            try {
                const response = await fetch('/api/stats');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const stats = await response.json();
                
                // Update all counts using the flat API response structure
                const elements = {
                    'acts-count': stats.acts_and_sis,
                    'provisions-count': stats.provisions,
                    'judgments-count': stats.court_judgments,
                    'paragraphs-count': stats.case_paragraphs,
                    'explanatory-count': stats.explanatory_sections,
                    'amendments-count': stats.amendments,
                    'pdf-legislation-count': stats.pdf_legislation,
                    'pdf-provisions-count': stats.pdf_provisions
                };
                
                // Update each element if it exists and has a value
                Object.entries(elements).forEach(([elementId, value]) => {
                    const element = document.getElementById(elementId);
                    if (element && value !== undefined) {
                        element.textContent = value; // Values are already formatted from API
                    }
                });
                
            } catch (error) {
                console.warn('Failed to fetch live stats:', error);
                // Keep static fallback values if API fails
            }
        }
        
        // Update stats on page load and refresh every 30 seconds for live updates
        document.addEventListener('DOMContentLoaded', function() {
            updateLiveStats();
            
            // Refresh every 30 seconds (30,000 milliseconds) for live updates
            setInterval(updateLiveStats, 30000);
        });

        // Analytics placeholder - track download events
        document.querySelectorAll('a[download]').forEach(function(link) {
            link.addEventListener('click', function() {
                // Analytics tracking would go here
                console.log('Download started:', this.getAttribute('href'));
            });
        });
    </script>
</body>
</html>