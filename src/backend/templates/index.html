<!DOCTYPE html>
<html lang="en" class="govuk-template">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lex API</title>
    <meta name="description" content="UK legal API for AI agents and researchers. Access comprehensive UK legislation and caselaw data with semantic search and Model Context Protocol integration.">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Import Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/i-dot-ai-logo.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/i-dot-ai-logo.svg">
    
    <!-- PostHog Analytics (anonymous, cookieless, EU region, GDPR compliant) -->
    {% if posthog_key %}
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Rr Mr fi Or Ar ci Tr Cr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('{{ posthog_key }}', {
            api_host: '{{ posthog_host }}',
            defaults: '2025-05-24',
            person_profiles: 'identified_only',
            disable_cookie: true,
            disable_session_recording: true,
            disable_surveys: true,
            autocapture: false,
            capture_pageview: false,
            opt_out_capturing_by_default: false,
        });
        
        // Anonymous page view tracking only
        posthog.capture('$pageview', {
            $current_url: window.location.href,
            page_title: document.title,
            anonymous: true
        });
    </script>
    {% endif %}
    
    <style>
        /* i.AI Design System - Based on GOV.UK Frontend 5.9.0 */
        
        /* Base template styles */
        .govuk-template {
            background-color: #0b0c0c;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        .govuk-template__body {
            background-color: #ffffff;
            color: #0b0c0c;
            font-family: Inter, arial, sans-serif;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Design tokens - Colours */
        :root {
            --govuk-text-colour: #0b0c0c;
            --govuk-link-colour: #c50878;
            --govuk-link-hover-colour: #9e0660;
            --govuk-focus-colour: #fd0;
            --govuk-border-colour: #b1b4b6;
            --govuk-success-colour: #00703c;
            --govuk-error-colour: #d4351c;
            --govuk-secondary-background: #f3f2f1;
            --iai-pink: #c50878;
            --iai-pink-hover: #9e0660;
            --iai-pink-dark: #4f0330;
        }

        /* Dark mode overrides */
        .dark-mode {
            --govuk-text-colour: #ffffff;
            --govuk-secondary-background: #1a1a1a;
            --govuk-border-colour: #505a5f;
        }

        .dark-mode .govuk-template__body {
            background-color: #0b0c0c;
            color: #ffffff;
        }

        .dark-mode .govuk-main-wrapper {
            background-color: #0b0c0c;
        }

        .dark-mode .code-block {
            background-color: #2a2a2a;
            border-color: #505a5f;
        }

        .dark-mode .govuk-notification-banner {
            background-color: #2a2a2a;
        }

        .dark-mode .mcp-tabs__list {
            background-color: #2a2a2a;
        }

        .dark-mode .mcp-tabs__tab {
            background-color: #2a2a2a;
            color: #ffffff;
            border-color: #505a5f;
        }

        .dark-mode .mcp-tabs__tab--active {
            background-color: #1a1a1a;
            color: var(--iai-pink);
        }

        .dark-mode .mcp-tabs__panel {
            background-color: #1a1a1a;
            border-color: #505a5f;
        }

        .dark-mode .mcp-tabs__content {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        /* Invert dark icons in dark mode - Claude and VS Code icons are already light-friendly */
        .dark-mode .mcp-tabs__tab-icon[alt="Microsoft Copilot"],
        .dark-mode .mcp-tabs__tab-icon[alt="Cursor"] {
            filter: invert(1);
        }

        .dark-mode .json-string { color: #79c0ff; }
        .dark-mode .json-key { color: #79c0ff; }
        .dark-mode .json-punctuation { color: #ffffff; }

        .dark-mode .github-card {
            background-color: #2a2a2a;
            border-color: #505a5f;
        }

        .dark-mode .github-card__title {
            color: #ffffff;
        }

        .dark-mode .github-card__description {
            color: #b1b4b6;
        }

        .dark-mode .github-card__icon {
            filter: invert(1);
        }

        .dark-mode .govuk-button--secondary {
            background-color: #505a5f;
            color: #ffffff;
            box-shadow: 0 2px 0 #383838;
        }

        .dark-mode .govuk-button--secondary:hover {
            background-color: #626a6e;
        }

        /* Typography scale */
        .govuk-heading-xl {
            font-size: 32px;
            line-height: 1.09375;
            font-weight: 700;
            margin: 0 0 30px 0;
        }
        
        .govuk-heading-l {
            font-size: 24px;
            line-height: 1.04167;
            font-weight: 700;
            margin: 0 0 20px 0;
        }
        
        .govuk-heading-m {
            font-size: 18px;
            line-height: 1.11111;
            font-weight: 700;
            margin: 0 0 15px 0;
        }
        
        .govuk-heading-s {
            font-size: 16px;
            line-height: 1.25;
            font-weight: 700;
            margin: 0 0 15px 0;
        }
        
        .govuk-body,
        .govuk-body-m {
            font-size: 16px;
            line-height: 1.25;
            margin: 0 0 15px 0;
        }
        
        .govuk-body-s {
            font-size: 14px;
            line-height: 1.14286;
            margin: 0 0 15px 0;
        }
        
        .govuk-body-xs {
            font-size: 12px;
            line-height: 1.16667;
            margin: 0 0 15px 0;
        }
        
        /* Responsive typography */
        @media (min-width: 40.0625em) {
            .govuk-heading-xl {
                font-size: 48px;
                line-height: 1.04167;
                margin-bottom: 50px;
            }
            
            .govuk-heading-l {
                font-size: 36px;
                line-height: 1.11111;
                margin-bottom: 30px;
            }
            
            .govuk-heading-m {
                font-size: 24px;
                line-height: 1.25;
                margin-bottom: 20px;
            }
            
            .govuk-heading-s {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
            
            .govuk-body,
            .govuk-body-m {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
            
            .govuk-body-s {
                font-size: 16px;
                line-height: 1.25;
                margin-bottom: 20px;
            }
            
            .govuk-body-xs {
                font-size: 14px;
                line-height: 1.14286;
                margin-bottom: 15px;
            }
        }
        
        /* Skip link */
        .govuk-skip-link {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: 0;
            overflow: hidden;
            clip: rect(0 0 0 0);
            -webkit-clip-path: inset(50%);
            clip-path: inset(50%);
            white-space: nowrap;
            background-color: var(--govuk-focus-colour);
            border: 0;
            color: var(--govuk-text-colour);
            cursor: pointer;
            font-family: Inter, arial, sans-serif;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.14286;
            padding: 10px;
            text-decoration: none;
            z-index: 9999;
        }
        
        .govuk-skip-link:focus {
            position: static;
            width: auto;
            height: auto;
            margin: inherit;
            overflow: visible;
            clip: auto;
            -webkit-clip-path: none;
            clip-path: none;
            white-space: inherit;
        }
        
        /* Header - hardcoded to stay dark regardless of mode */
        .govuk-header {
            background: #0b0c0c;
            color: #ffffff;
            border-bottom: 5px solid var(--iai-pink);
        }
        
        .govuk-header__container {
            padding-top: 30px;
            padding-bottom: 30px;
            position: relative;
        }
        
        .govuk-header__content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        
        .govuk-header__service-name-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        .govuk-header__experiment-tag {
            background: var(--iai-pink);
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            letter-spacing: 0.5px;
            padding: 4px 8px;
            margin-left: 18px;
            border-radius: 0;
        }
        
        .govuk-header__link--service-name {
            font-weight: 700;
            font-size: 30px;
            line-height: 1.11111;
            color: #ffffff;
            text-decoration: none;
            margin: 0;
        }
        
        .govuk-header__link--service-name:hover {
            text-decoration: underline;
            text-decoration-thickness: 3px;
            text-underline-offset: 0.1em;
        }
        
        .govuk-header__iai-logo {
            display: flex;
            align-items: center;
            margin-left: auto;
            padding-left: 30px;
        }
        
        .govuk-header__iai-logo img {
            height: 40px;
            width: auto;
            margin: 15px 0;
            display: block;
        }

        .govuk-header__lab-tag {
            background: var(--iai-pink);
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            letter-spacing: 0.5px;
            padding: 4px 8px;
            margin-left: 20px;
            border-radius: 0;
        }

        /* Dark mode toggle */
        .dark-mode-toggle {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
            cursor: pointer;
            padding: 4px 10px;
            font-size: 12px;
            font-family: Inter, arial, sans-serif;
            margin-left: 15px;
            transition: all 0.2s ease;
        }

        .dark-mode-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: white;
        }

        /* API status indicator */
        .api-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-left: 15px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #b1b4b6;
            transition: all 0.3s ease;
        }

        .status-dot.operational {
            background: #00e676;
            box-shadow: 0 0 8px #00e676;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 8px #00e676;
            }
            50% {
                box-shadow: 0 0 12px #00e676, 0 0 4px #00e676;
            }
        }

        .status-dot.degraded {
            background: #f47738;
        }

        .status-dot.down {
            background: var(--govuk-error-colour);
        }

        @media (min-width: 40.0625em) {
            .govuk-header__container {
                padding-top: 35px;
                padding-bottom: 35px;
            }
            
            .govuk-header__link--service-name {
                font-size: 30px;
                line-height: 1.25;
            }
            
            .govuk-header__experiment-tag {
                font-size: 16px;
                margin-left: 20px;
            }
            
            .govuk-header__iai-logo img {
                height: 45px;
                margin: 20px 0;
            }

            .govuk-header__lab-tag {
                font-size: 16px;
            }
        }
        
        /* Width container */
        .govuk-width-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-width-container {
                padding: 0 30px;
            }
        }
        
        /* Main wrapper */
        .govuk-main-wrapper {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-main-wrapper {
                padding-top: 40px;
                padding-bottom: 40px;
            }
        }
        
        /* Grid system */
        .govuk-grid-row {
            margin-right: -15px;
            margin-left: -15px;
        }
        
        .govuk-grid-row::after {
            content: "";
            display: block;
            clear: both;
        }
        
        .govuk-grid-column-full {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-one-half {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-two-thirds {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        .govuk-grid-column-one-third {
            box-sizing: border-box;
            width: 100%;
            padding: 0 15px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-grid-column-one-half {
                width: 50%;
                float: left;
            }
            
            .govuk-grid-column-two-thirds {
                width: 66.6667%;
                float: left;
            }
            
            .govuk-grid-column-one-third {
                width: 33.3333%;
                float: left;
            }
        }
        
        /* Spacing utilities */
        .govuk-\!-margin-bottom-6 {
            margin-bottom: 30px !important;
        }
        
        .govuk-\!-margin-bottom-8 {
            margin-bottom: 50px !important;
        }
        
        .govuk-\!-margin-bottom-9 {
            margin-bottom: 60px !important;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-\!-margin-bottom-6 {
                margin-bottom: 30px !important;
            }
            
            .govuk-\!-margin-bottom-8 {
                margin-bottom: 50px !important;
            }
            
            .govuk-\!-margin-bottom-9 {
                margin-bottom: 60px !important;
            }
        }
        
        /* Links */
        .govuk-link {
            color: var(--govuk-link-colour);
            text-decoration: underline;
            text-decoration-thickness: max(1px, 0.0625rem);
            text-underline-offset: 0.1em;
        }
        
        .govuk-link:visited {
            color: var(--govuk-link-colour);
        }
        
        .govuk-link:hover {
            color: var(--govuk-link-hover-colour);
            text-decoration-thickness: max(3px, 0.1875rem, 0.12em);
        }
        
        .govuk-link:focus {
            color: var(--govuk-text-colour);
            background-color: var(--govuk-focus-colour);
            box-shadow: 0 -2px var(--govuk-focus-colour), 0 4px var(--govuk-text-colour);
            text-decoration: none;
            outline: 3px solid transparent;
        }
        
        /* Buttons */
        .govuk-button {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.1875;
            box-sizing: border-box;
            display: inline-block;
            position: relative;
            width: 100%;
            margin-top: 0;
            margin-right: 0;
            margin-left: 0;
            margin-bottom: 22px;
            padding: 8px 10px 7px;
            border: 2px solid transparent;
            border-radius: 0;
            color: #ffffff;
            background-color: var(--iai-pink);
            box-shadow: 0 2px 0 var(--iai-pink-dark);
            text-align: center;
            vertical-align: top;
            cursor: pointer;
            text-decoration: none;
        }
        
        .govuk-button:hover {
            background-color: var(--iai-pink-hover);
            box-shadow: 0 2px 0 var(--iai-pink-dark);
        }
        
        .govuk-button:focus {
            border-color: var(--govuk-focus-colour);
            outline: 3px solid transparent;
            box-shadow: inset 0 0 0 1px var(--govuk-focus-colour);
        }
        
        .govuk-button--secondary {
            background-color: var(--govuk-secondary-background);
            box-shadow: 0 2px 0 var(--govuk-border-colour);
            color: var(--govuk-text-colour);
        }
        
        .govuk-button--secondary:hover {
            background-color: #dbdad9;
            box-shadow: 0 2px 0 var(--govuk-border-colour);
        }
        
        @media (min-width: 40.0625em) {
            .govuk-button {
                font-size: 19px;
                line-height: 1;
                width: auto;
                margin-bottom: 32px;
            }
        }
        
        /* Notification banner */
        .govuk-notification-banner {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            margin-bottom: 30px;
            border: 5px solid var(--govuk-border-colour);
            background-color: var(--govuk-secondary-background);
        }
        
        .govuk-notification-banner__header {
            padding: 10px 15px;
            border-bottom: 1px solid transparent;
            background-color: var(--govuk-border-colour);
        }
        
        .govuk-notification-banner__title {
            font-size: 16px;
            font-weight: 700;
            line-height: 1.25;
            margin: 0;
            padding: 0;
        }
        
        .govuk-notification-banner__content {
            padding: 15px;
            color: var(--govuk-text-colour);
        }
        
        .govuk-notification-banner--success {
            border-color: var(--govuk-success-colour);
        }
        
        .govuk-notification-banner--success .govuk-notification-banner__header {
            background-color: var(--govuk-success-colour);
            color: #ffffff;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-notification-banner {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 50px;
            }
            
            .govuk-notification-banner__header {
                padding: 15px 20px;
            }
            
            .govuk-notification-banner__title {
                font-size: 19px;
                line-height: 1.31579;
            }
            
            .govuk-notification-banner__content {
                padding: 20px;
            }
        }
        
        /* Code blocks */
        .code-block {
            background-color: var(--govuk-secondary-background);
            border: 1px solid var(--govuk-border-colour);
            padding: 10px 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            font-weight: bold;
            line-height: 1.45;
            position: relative;
        }

        .code-block pre {
            margin: 0;
            padding: 0;
            padding-right: 80px;
            background: none;
            border: 0;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
        }

        /* Copy button */
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border: 1px solid var(--iai-pink);
            background: var(--govuk-secondary-background);
            color: var(--iai-pink);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 0;
            font-family: Inter, arial, sans-serif;
            transition: all 0.2s ease;
        }

        .copy-button:hover {
            background-color: var(--iai-pink);
            color: #ffffff;
        }

        .copy-button:focus {
            background-color: var(--govuk-focus-colour);
            border-color: var(--govuk-text-colour);
            color: var(--govuk-text-colour);
            outline: 3px solid transparent;
        }

        .copy-button.copied {
            background: var(--govuk-success-colour);
            border-color: var(--govuk-success-colour);
            color: white;
        }

        .dark-mode .copy-button {
            background: #1a1a1a;
            border-color: var(--iai-pink);
            color: var(--iai-pink);
        }
        
        /* JSON syntax highlighting */
        .json-string { color: #0969da; }
        .json-number { color: #0550ae; }
        .json-boolean { color: #8250df; }
        .json-null { color: #656d76; }
        .json-key { color: #0969da; font-weight: 600; }
        .json-punctuation { color: #24292f; }
        
        /* Lists */
        .govuk-list {
            font-family: Inter, arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-weight: 400;
            font-size: 16px;
            line-height: 1.25;
            color: var(--govuk-text-colour);
            margin: 0 0 15px 0;
            padding-left: 20px;
        }
        
        .govuk-list--bullet {
            list-style-type: disc;
        }
        
        .govuk-list li {
            margin-bottom: 5px;
        }
        
        @media (min-width: 40.0625em) {
            .govuk-list {
                font-size: 19px;
                line-height: 1.31579;
                margin-bottom: 20px;
            }
        }

        /* Stats animation */
        .stat-number {
            display: inline-block;
        }

        /* Use case cards */
        .use-cases-section {
            margin: 40px 0;
        }

        .use-case-card {
            background: var(--govuk-secondary-background);
            padding: 25px;
            height: 100%;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .use-case-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .dark-mode .use-case-card {
            background: #2a2a2a;
        }

        .dark-mode .use-case-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .use-case-card h3 {
            margin-bottom: 10px;
        }

        .use-case-icon {
            font-size: 36px;
            margin-bottom: 15px;
        }

        /* Warning text - GOV.UK official styling */
        .govuk-warning-text {
            position: relative;
            padding: 10px 0 10px 45px;
            margin-bottom: 20px;
        }

        .govuk-warning-text__icon {
            box-sizing: border-box;
            display: inline-block;
            position: absolute;
            left: 0;
            min-width: 35px;
            min-height: 35px;
            margin-top: -7px;
            border: 3px solid #0b0c0c;
            border-radius: 50%;
            color: #ffffff;
            background: #0b0c0c;
            font-size: 30px;
            line-height: 29px;
            text-align: center;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .govuk-warning-text__text {
            font-weight: 700;
            display: block;
            font-size: 16px;
        }

        .dark-mode .govuk-warning-text__icon {
            border-color: #ffffff;
            background: #ffffff;
            color: #0b0c0c;
        }

        /* PDF section with warning bracket */
        .pdf-section-with-warning {
            display: flex;
            align-items: stretch;
            gap: 30px;
            margin-top: 30px;
            padding: 20px 0;
        }

        .pdf-section-content {
            flex: 1;
            border-left: 4px solid var(--iai-pink);
            padding-left: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .pdf-section-content h3 {
            margin-top: 0;
        }

        .pdf-section-content ul {
            margin-bottom: 0;
        }

        .pdf-warning-connector {
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--govuk-secondary-background);
            padding: 20px;
            border-left: 4px solid var(--iai-pink);
        }

        .dark-mode .pdf-warning-connector {
            background: #2a2a2a;
        }

        .pdf-warning-connector .govuk-warning-text {
            margin: 0;
            padding-left: 50px;
        }

        @media (max-width: 40em) {
            .pdf-section-with-warning {
                flex-direction: column;
                gap: 20px;
            }
        }

        /* Cursor install button */
        .cursor-install-section {
            margin-bottom: 25px;
        }

        .cursor-install-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .cursor-install-icon {
            width: 20px;
            height: 20px;
            filter: brightness(0) invert(1);
        }

        /* GOV.UK Details component */
        .govuk-details {
            margin-bottom: 20px;
        }

        .govuk-details__summary {
            display: inline-block;
            position: relative;
            margin-bottom: 5px;
            padding-left: 25px;
            color: var(--govuk-link-colour);
            cursor: pointer;
            font-size: 16px;
        }

        .govuk-details__summary:hover {
            color: var(--govuk-link-hover-colour);
        }

        .govuk-details__summary::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-color: transparent;
            border-left-color: inherit;
            border-width: 7px 0 7px 12.124px;
            transform: translateY(3px);
        }

        .govuk-details[open] > .govuk-details__summary::before {
            border-width: 12.124px 7px 0 7px;
            border-color: inherit;
            border-top-color: inherit;
            border-left-color: transparent;
        }

        .govuk-details__summary-text {
            text-decoration: underline;
        }

        .govuk-details__text {
            padding: 15px;
            padding-left: 20px;
            border-left: 5px solid var(--govuk-border-colour);
        }

        .dark-mode .govuk-details__text {
            border-left-color: #505a5f;
        }

        /* Phase banner */
        .govuk-phase-banner {
            padding: 10px 0;
            border-bottom: 1px solid #b1b4b6;
        }

        .govuk-phase-banner__content {
            display: flex;
            align-items: center;
            margin: 0;
            font-size: 14px;
        }

        .govuk-phase-banner__content__tag {
            margin-right: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .govuk-phase-banner__text {
            color: var(--govuk-text-colour);
        }

        .govuk-tag {
            display: inline-block;
            padding: 4px 8px;
            font-weight: 700;
            font-size: 14px;
            line-height: 1;
            text-transform: uppercase;
            letter-spacing: 1px;
            background-color: var(--iai-pink);
            color: #ffffff;
        }

        /* Footer - hardcoded to stay dark regardless of mode */
        .govuk-footer {
            background: #0b0c0c;
            border-top: 1px solid #b1b4b6;
        }
        
        .govuk-footer__content-container {
            padding-top: 25px;
            padding-bottom: 15px;
        }
        
        .govuk-footer__content {
            color: #ffffff;
            text-align: center;
        }
        
        .govuk-footer__link {
            color: #ffffff;
            text-decoration: underline;
            text-decoration-thickness: max(1px, 0.0625rem);
            text-underline-offset: 0.1em;
        }
        
        .govuk-footer__link:hover {
            color: var(--iai-pink);
            text-decoration-thickness: max(3px, 0.1875rem, 0.12em);
        }
        
        @media (min-width: 40.0625em) {
            .govuk-footer__content-container {
                padding-top: 40px;
                padding-bottom: 25px;
            }
        }
        
        /* Focus states for all interactive elements */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus,
        a:focus {
            outline: 3px solid var(--govuk-focus-colour);
            outline-offset: 0;
        }
        
        /* Tab interface for MCP setup */
        .mcp-tabs {
            border: 2px solid var(--govuk-border-colour);
            border-radius: 0;
            background-color: var(--govuk-secondary-background);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .mcp-tabs__list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            border-bottom: 2px solid var(--govuk-border-colour);
            background-color: #ffffff;
        }
        
        .mcp-tabs__tab {
            background: none;
            border: none;
            padding: 15px 20px;
            font-family: Inter, arial, sans-serif;
            font-size: 16px;
            font-weight: 500;
            color: var(--govuk-text-colour);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            border-right: 1px solid var(--govuk-border-colour);
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .mcp-tabs__tab:last-child {
            border-right: none;
        }
        
        .mcp-tabs__tab:hover {
            background-color: var(--govuk-secondary-background);
            border-bottom-color: var(--govuk-border-colour);
            transform: translateY(-1px);
        }
        
        .mcp-tabs__tab--active {
            color: var(--iai-pink);
            border-bottom-color: var(--iai-pink);
            background-color: #ffffff;
            font-weight: 700;
            box-shadow: inset 0 3px 0 var(--iai-pink);
        }
        
        .mcp-tabs__tab-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
        
        .mcp-tabs__content {
            display: none;
            padding: 25px;
            background-color: #ffffff;
        }
        
        .mcp-tabs__content--active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (min-width: 40.0625em) {
            .mcp-tabs__tab {
                font-size: 16px;
                padding: 20px 30px;
            }
            
            .mcp-tabs__tab-icon {
                width: 24px;
                height: 24px;
            }
            
            .mcp-tabs__content {
                padding: 35px;
            }
        }

        /* Two column layout for API docs */
        .api-docs-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 40.0625em) {
            .api-docs-grid {
                grid-template-columns: 1fr 1fr;
                gap: 30px;
            }
        }

        /* GitHub card styling */
        .github-card {
            border: 2px solid var(--govuk-border-colour);
            border-radius: 0;
            padding: 20px;
            background-color: #ffffff;
            margin-bottom: 30px;
            transition: border-color 0.3s ease;
        }
        
        .github-card:hover {
            border-color: var(--iai-pink);
        }
        
        .github-card__header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .github-card__icon {
            width: 32px;
            height: 32px;
            flex-shrink: 0;
        }
        
        .github-card__title {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
            color: var(--govuk-text-colour);
            line-height: 1.11111;
        }
        
        .github-card__description {
            margin-bottom: 20px;
            color: #505a5f;
        }
        
        .github-card__actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        @media (min-width: 40.0625em) {
            .github-card {
                padding: 30px;
            }
            
            .github-card__icon {
                width: 40px;
                height: 40px;
            }
            
            .github-card__title {
                font-size: 24px;
                line-height: 1.25;
            }
            
            .github-card__actions {
                flex-direction: row;
                gap: 15px;
            }
        }

        /* Accessibility helpers */
        .govuk-visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: hidden !important;
            clip: rect(0 0 0 0) !important;
            -webkit-clip-path: inset(50%) !important;
            clip-path: inset(50%) !important;
            white-space: nowrap !important;
        }
        
        /* Print styles */
        @media print {
            .govuk-template {
                background: #ffffff;
            }
            
            .govuk-template__body {
                font-size: 14pt;
                line-height: 1.15;
            }
            
            .govuk-header,
            .govuk-footer {
                display: none;
            }
            
            .govuk-link {
                color: #000000;
            }
            
            .code-block {
                background: #ffffff;
                border: 1pt solid #000000;
            }
            
            .copy-button {
                display: none;
            }
        }
        
        /* Reduce motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>

<body class="govuk-template__body">
    <a href="#main-content" class="govuk-skip-link">Skip to main content</a>

    <header class="govuk-header" role="banner">
        <div class="govuk-header__container govuk-width-container">
            <div class="govuk-header__content">
                <div class="govuk-header__service-name-container">
                    <a href="/" class="govuk-header__link govuk-header__link--service-name">
                        Lex API
                    </a>
                    <span class="govuk-header__experiment-tag">EXPERIMENT</span>
                    <div class="api-status">
                        <span class="status-dot" id="status-dot"></span>
                        <span class="status-text" id="status-text">Checking...</span>
                    </div>
                </div>
                <div class="govuk-header__iai-logo">
                    <a href="https://ai.gov.uk" aria-label="Incubator for AI" target="_blank" rel="noopener noreferrer">
                        <img src="https://ai.gov.uk/logos/i-dot-ai-reverse.svg" alt="i.AI - Incubator for Artificial Intelligence" />
                    </a>
                    <span class="govuk-header__lab-tag">LAB</span>
                    <button class="dark-mode-toggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode">
                        <span id="dark-mode-icon">Dark</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="govuk-width-container">
        <div class="govuk-phase-banner">
            <p class="govuk-phase-banner__content">
                <strong class="govuk-tag govuk-phase-banner__content__tag">
                    Experiment
                </strong>
                <span class="govuk-phase-banner__text">
                    This is an experiment â€“ your <a class="govuk-link" href="https://github.com/i-dot-ai/lex/issues/new" target="_blank" rel="noopener noreferrer">feedback</a> will help us improve it.
                </span>
            </p>
        </div>
        <main class="govuk-main-wrapper" id="main-content" role="main">
            
            <!-- Hero section -->
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <p class="govuk-body">UK legal API for AI agents and researchers. Access comprehensive UK legislation and caselaw data with semantic search and Model Context Protocol integration.</p>
                    <p class="govuk-body">Our API provides programmatic access to millions of UK legal documents, court decisions, and statutory instruments with advanced semantic search capabilities, making it easier than ever to build AI-powered legal applications and conduct comprehensive legal analysis.</p>
                    <p class="govuk-body">This API is hosted as an experimental service and should not be used as a production dependency.</p>
                </div>
                <div class="govuk-grid-column-one-third">
                    <!-- Notification banner -->
                    <div class="govuk-notification-banner govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title">
                        <div class="govuk-notification-banner__header">
                            <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                                Important
                            </h2>
                        </div>
                        <div class="govuk-notification-banner__content">
                            <p class="govuk-notification-banner__heading">
                                This API is for research and non-production use. Rate limited to 60 requests per minute, 1000 per hour per IP address.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Use Case Cards section -->
            <section class="use-cases-section govuk-!-margin-bottom-8">
                <h2 class="govuk-heading-l">What Can You Build?</h2>
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-one-third">
                        <div class="use-case-card">
                            <div class="use-case-icon">&#9878;&#65039;</div>
                            <h3 class="govuk-heading-s">Legal Research</h3>
                            <p class="govuk-body-s">Find precedents and relevant legislation in seconds. Ask natural language questions about UK law.</p>
                        </div>
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <div class="use-case-card">
                            <div class="use-case-icon">&#128202;</div>
                            <h3 class="govuk-heading-s">Policy Analysis</h3>
                            <p class="govuk-body-s">Track legislative changes over time. Compare provisions across different Acts and amendments.</p>
                        </div>
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <div class="use-case-card">
                            <div class="use-case-icon">&#129302;</div>
                            <h3 class="govuk-heading-s">AI Grounding</h3>
                            <p class="govuk-body-s">Ground AI assistants in authoritative UK legal sources. Reduce hallucinations with verified data.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MCP Setup section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">Model Context Protocol Setup</h2>
                    <p class="govuk-body">Connect the Lex API to AI assistants via Model Context Protocol for seamless legal research integration.</p>
                    
                    <!-- Tab interface -->
                    <div class="mcp-tabs">
                        <ul class="mcp-tabs__list" role="tablist">
                            <li role="presentation">
                                <button class="mcp-tabs__tab mcp-tabs__tab--active" 
                                        role="tab" 
                                        aria-selected="true" 
                                        aria-controls="claude-panel" 
                                        id="claude-tab"
                                        onclick="switchTab('claude')">
                                    <img src="/claude.svg" alt="Claude" class="mcp-tabs__tab-icon">
                                    Claude Desktop
                                </button>
                            </li>
                            <li role="presentation">
                                <button class="mcp-tabs__tab"
                                        role="tab"
                                        aria-selected="false"
                                        aria-controls="claude-code-panel"
                                        id="claude-code-tab"
                                        onclick="switchTab('claude-code')">
                                    <img src="/claude.svg" alt="Claude Code" class="mcp-tabs__tab-icon">
                                    Claude Code
                                </button>
                            </li>
                            <li role="presentation">
                                <button class="mcp-tabs__tab"
                                        role="tab"
                                        aria-selected="false"
                                        aria-controls="cursor-panel"
                                        id="cursor-tab"
                                        onclick="switchTab('cursor')">
                                    <img src="/cursor.svg" alt="Cursor" class="mcp-tabs__tab-icon">
                                    Cursor
                                </button>
                            </li>
                            <li role="presentation">
                                <button class="mcp-tabs__tab"
                                        role="tab"
                                        aria-selected="false"
                                        aria-controls="copilot-panel"
                                        id="copilot-tab"
                                        onclick="switchTab('copilot')">
                                    <img src="/copilot.svg" alt="Microsoft Copilot" class="mcp-tabs__tab-icon">
                                    Microsoft Copilot
                                </button>
                            </li>
                            <li role="presentation">
                                <button class="mcp-tabs__tab"
                                        role="tab"
                                        aria-selected="false"
                                        aria-controls="vscode-panel"
                                        id="vscode-tab"
                                        onclick="switchTab('vscode')">
                                    <img src="/vscode.svg" alt="VS Code" class="mcp-tabs__tab-icon">
                                    VS Code
                                </button>
                            </li>
                        </ul>
                        
                        <!-- Claude Desktop Configuration -->
                        <div id="claude-panel" class="mcp-tabs__content mcp-tabs__content--active" role="tabpanel" aria-labelledby="claude-tab">
                            <h3 class="govuk-heading-m">Claude Desktop Configuration</h3>
                            <p class="govuk-body">Add this configuration to your Claude Desktop configuration file:</p>
                            <p class="govuk-body-s"><strong>Config file location:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></p>
                            
                            <div class="code-block">
                                <pre id="claude-config"><span class="json-punctuation">{</span>
  <span class="json-key">"mcpServers"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
    <span class="json-key">"lex"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
      <span class="json-key">"command"</span><span class="json-punctuation">:</span> <span class="json-string">"npx"</span><span class="json-punctuation">,</span>
      <span class="json-key">"args"</span><span class="json-punctuation">:</span> <span class="json-punctuation">[</span>
        <span class="json-string">"-y"</span><span class="json-punctuation">,</span>
        <span class="json-string">"mcp-remote@latest"</span><span class="json-punctuation">,</span>
        <span class="json-string">"{{ base_url }}/mcp"</span>
      <span class="json-punctuation">]</span><span class="json-punctuation">,</span>
      <span class="json-key">"env"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{}</span>
    <span class="json-punctuation">}</span>
  <span class="json-punctuation">}</span>
<span class="json-punctuation">}</span></pre>
                                <button class="copy-button" onclick="copyToClipboard('claude-config')" aria-label="Copy Claude Desktop MCP configuration to clipboard">Copy</button>
                            </div>
                        </div>

                        <!-- Claude Code Configuration -->
                        <div id="claude-code-panel" class="mcp-tabs__content" role="tabpanel" aria-labelledby="claude-code-tab">
                            <h3 class="govuk-heading-m">Claude Code Configuration</h3>
                            <p class="govuk-body">Connect Claude Code to Lex API using the CLI. Claude Code supports HTTP, SSE, and stdio MCP transports.</p>

                            <h4 class="govuk-heading-s">One-Line Install</h4>
                            <p class="govuk-body-s">Run this command in your terminal to add the Lex MCP server:</p>

                            <div class="code-block">
                                <pre id="claude-code-config">claude mcp add --transport http lex {{ base_url }}/mcp</pre>
                                <button class="copy-button" onclick="copyToClipboard('claude-code-config')" aria-label="Copy Claude Code MCP command to clipboard">Copy</button>
                            </div>

                            <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                    <span class="govuk-details__summary-text">Configuration options</span>
                                </summary>
                                <div class="govuk-details__text">
                                    <p class="govuk-body-s"><strong>Scope options:</strong></p>
                                    <ul class="govuk-list govuk-list--bullet govuk-body-s">
                                        <li><code>--scope local</code> (default) â€” Available only in current project</li>
                                        <li><code>--scope project</code> â€” Shared via <code>.mcp.json</code> file</li>
                                        <li><code>--scope user</code> â€” Available across all projects</li>
                                    </ul>

                                    <p class="govuk-body-s"><strong>Manage servers:</strong></p>
                                    <div class="code-block">
                                        <pre id="claude-code-manage"># List configured servers
claude mcp list

# Check server status (in Claude Code)
/mcp

# Remove a server
claude mcp remove lex</pre>
                                        <button class="copy-button" onclick="copyToClipboard('claude-code-manage')" aria-label="Copy Claude Code management commands to clipboard">Copy</button>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <!-- Cursor Configuration -->
                        <div id="cursor-panel" class="mcp-tabs__content" role="tabpanel" aria-labelledby="cursor-tab">
                            <h3 class="govuk-heading-m">Cursor Configuration</h3>
                            <p class="govuk-body">Add the Lex API MCP server to Cursor with one click or configure manually.</p>

                            <div class="cursor-install-section">
                                <h4 class="govuk-heading-s">One-Click Install</h4>
                                <p class="govuk-body-s">Click the button below to automatically add Lex to your Cursor configuration:</p>
                                <a id="cursor-install-link" href="#" class="govuk-button cursor-install-button" role="button">
                                    <img src="/cursor.svg" alt="" class="cursor-install-icon"> Add to Cursor
                                </a>
                            </div>

                            <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                    <span class="govuk-details__summary-text">Manual Configuration</span>
                                </summary>
                                <div class="govuk-details__text">
                                    <p class="govuk-body-s">Add this to your Cursor MCP configuration file:</p>
                                    <p class="govuk-body-s"><strong>Config file location:</strong> <code>~/.cursor/mcp.json</code> (global) or <code>.cursor/mcp.json</code> (project)</p>

                                    <div class="code-block">
                                        <pre id="cursor-config"><span class="json-punctuation">{</span>
  <span class="json-key">"mcpServers"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
    <span class="json-key">"lex"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
      <span class="json-key">"url"</span><span class="json-punctuation">:</span> <span class="json-string">"{{ base_url }}/mcp"</span>
    <span class="json-punctuation">}</span>
  <span class="json-punctuation">}</span>
<span class="json-punctuation">}</span></pre>
                                        <button class="copy-button" onclick="copyToClipboard('cursor-config')" aria-label="Copy Cursor MCP configuration to clipboard">Copy</button>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <!-- Microsoft Copilot Configuration -->
                        <div id="copilot-panel" class="mcp-tabs__content" role="tabpanel" aria-labelledby="copilot-tab">
                            <h3 class="govuk-heading-m">Microsoft Copilot Studio Configuration</h3>
                            <p class="govuk-body">To use Lex API with Microsoft Copilot Studio, follow these steps:</p>
                            
                            <ol class="govuk-list govuk-list--number">
                                <li><strong>Access Copilot Studio:</strong> Go to your Microsoft Copilot Studio environment</li>
                                <li><strong>Create MCP Connection:</strong> Navigate to Tools â†’ Add a tool â†’ New tool â†’ Model Context Protocol</li>
                                <li><strong>Configure Server URL:</strong> Enter the Lex API MCP endpoint URL</li>
                                <li><strong>Set Authentication:</strong> Configure API key authentication if required</li>
                            </ol>
                            
                            <p class="govuk-body-s"><strong>Server URL:</strong></p>
                            <div class="code-block">
                                <pre id="copilot-url">{{ base_url }}/mcp</pre>
                                <button class="copy-button" onclick="copyToClipboard('copilot-url')" aria-label="Copy Microsoft Copilot MCP server URL to clipboard">Copy</button>
                            </div>

                            <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                    <span class="govuk-details__summary-text">Requirements</span>
                                </summary>
                                <div class="govuk-details__text">
                                    <ul class="govuk-list govuk-list--bullet govuk-body-s">
                                        <li>Microsoft Copilot Studio access</li>
                                        <li>Generative Orchestration must be enabled</li>
                                        <li>Streamable transport support (current standard)</li>
                                    </ul>
                                </div>
                            </details>
                        </div>

                        <!-- VS Code Configuration -->
                        <div id="vscode-panel" class="mcp-tabs__content" role="tabpanel" aria-labelledby="vscode-tab">
                            <h3 class="govuk-heading-m">VS Code + GitHub Copilot Configuration</h3>
                            <p class="govuk-body">Add this configuration to your VS Code MCP settings file:</p>
                            <p class="govuk-body-s"><strong>Config file location:</strong> <code>.vscode/mcp.json</code> (workspace) or user profile <code>mcp.json</code></p>

                            <div class="code-block">
                                <pre id="vscode-config"><span class="json-punctuation">{</span>
  <span class="json-key">"servers"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
    <span class="json-key">"lex"</span><span class="json-punctuation">:</span> <span class="json-punctuation">{</span>
      <span class="json-key">"type"</span><span class="json-punctuation">:</span> <span class="json-string">"http"</span><span class="json-punctuation">,</span>
      <span class="json-key">"url"</span><span class="json-punctuation">:</span> <span class="json-string">"{{ base_url }}/mcp"</span>
    <span class="json-punctuation">}</span>
  <span class="json-punctuation">}</span>
<span class="json-punctuation">}</span></pre>
                                <button class="copy-button" onclick="copyToClipboard('vscode-config')" aria-label="Copy VS Code MCP configuration to clipboard">Copy</button>
                            </div>

                            <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                    <span class="govuk-details__summary-text">Alternative setup methods</span>
                                </summary>
                                <div class="govuk-details__text">
                                    <p class="govuk-body-s"><strong>Via Command Palette:</strong></p>
                                    <ol class="govuk-list govuk-list--number govuk-body-s">
                                        <li>Open Command Palette (<code>Cmd+Shift+P</code> / <code>Ctrl+Shift+P</code>)</li>
                                        <li>Search for <code>MCP: Add Server</code></li>
                                        <li>Select <code>HTTP</code> transport</li>
                                        <li>Enter URL: <code>{{ base_url }}/mcp</code></li>
                                        <li>Enter server ID: <code>lex</code></li>
                                    </ol>
                                </div>
                            </details>

                            <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                    <span class="govuk-details__summary-text">Requirements</span>
                                </summary>
                                <div class="govuk-details__text">
                                    <ul class="govuk-list govuk-list--bullet govuk-body-s">
                                        <li>VS Code 1.99 or later</li>
                                        <li>GitHub Copilot extension installed</li>
                                        <li>Agent mode enabled in Copilot Chat</li>
                                    </ul>
                                </div>
                            </details>
                        </div>

                    </div>
                    
                </div>
            </div>

            <!-- Dataset Coverage section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">Dataset Coverage</h2>
                    <p class="govuk-body">This experimental service provides access to comprehensive UK legal data for research and development purposes.</p>
                    
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Available Documents</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><strong id="acts-count" class="stat-number">X</strong> Acts and Statutory Instruments</li>
                                <li><strong id="provisions-count" class="stat-number">X</strong> individual legal provisions</li>
                                <li><strong id="judgments-count" class="stat-number">X</strong> court judgments and decisions</li>
                                <li><strong id="paragraphs-count" class="stat-number">X</strong> court case paragraphs</li>
                                <li><strong id="explanatory-count" class="stat-number">X</strong> explanatory note sections</li>
                                <li><strong id="amendments-count" class="stat-number">X</strong> legislative amendments</li>
                            </ul>

                        </div>

                        <div class="govuk-grid-column-one-half">
                            <h3 class="govuk-heading-m">Temporal Coverage</h3>
                            <ul class="govuk-list govuk-list--bullet">
                                <li><strong>Legislation:</strong> 1267-present (complete from 1963)</li>
                                <li><strong>Court cases:</strong> 2001-present</li>
                                <li><strong>Search capabilities:</strong> Both semantic and exact matching</li>
                                <li><strong>Updates:</strong> Dataset grows as new legislation and cases are published</li>
                            </ul>
                        </div>
                    </div>

                    <div class="pdf-section-with-warning">
                        <div class="pdf-section-content">
                            <h3 class="govuk-heading-m">PDF Digitisation</h3>
                            <p class="govuk-body-s">Historical legislation digitised using AI for improved accessibility:</p>
                            <ul class="govuk-list govuk-list--bullet govuk-body-s">
                                <li><strong id="pdf-legislation-count" class="stat-number">X</strong> PDF-sourced Acts (LLM extracted)</li>
                                <li><strong id="pdf-provisions-count" class="stat-number">X</strong> PDF-sourced provisions (LLM extracted)</li>
                            </ul>
                        </div>
                        <div class="pdf-warning-connector">
                            <div class="govuk-warning-text">
                                <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
                                <strong class="govuk-warning-text__text">
                                    <span class="govuk-visually-hidden">Warning</span>
                                    LLM transcriptions are not independently verified. Data is labelled in API responses. Verify at source where accuracy is critical.
                                </strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API Documentation section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <h2 class="govuk-heading-l">API Documentation</h2>
                    <p class="govuk-body">Interactive API documentation with live examples and comprehensive endpoint details.</p>
                    
                    <div class="api-docs-grid govuk-!-margin-bottom-6">
                        <div>
                            <h3 class="govuk-heading-m">Swagger UI</h3>
                            <p class="govuk-body">Interactive API explorer with request and response examples for all endpoints.</p>
                            <a href="/api/docs" class="govuk-button" role="button" target="_blank" rel="noopener noreferrer">
                                View Swagger Documentation
                            </a>
                        </div>
                        
                        <div>
                            <h3 class="govuk-heading-m">ReDoc</h3>
                            <p class="govuk-body">Clean, reference-style documentation with detailed schemas and examples.</p>
                            <a href="/api/redoc" class="govuk-button" role="button" target="_blank" rel="noopener noreferrer">
                                View ReDoc Documentation
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GitHub Self-hosting section -->
            <div class="govuk-grid-row govuk-!-margin-bottom-8">
                <div class="govuk-grid-column-full">
                    <div class="github-card">
                        <div class="github-card__header">
                            <img src="/github.svg" alt="GitHub" class="github-card__icon">
                            <h2 class="github-card__title">Open Source & Self-Hosting</h2>
                        </div>
                        <p class="github-card__description govuk-body">
                            Want to host your own instance or contribute to development? Lex API is open source under MIT licence.
                        </p>
                        <div class="github-card__actions">
                            <a href="https://github.com/i-dot-ai/lex" 
                               class="govuk-button" 
                               target="_blank" 
                               rel="noopener noreferrer">
                                <span class="govuk-visually-hidden">Open </span>View Source Code
                            </a>
                            <a href="https://github.com/i-dot-ai/lex/blob/main/docs/deployment.md"
                               class="govuk-button govuk-button--secondary"
                               target="_blank"
                               rel="noopener noreferrer">
                                <span class="govuk-visually-hidden">View </span>Deployment Guide
                            </a>
                        </div>
                    </div>
                </div>
            </div>


        </main>
    </div>

    <footer class="govuk-footer" role="contentinfo">
        <div class="govuk-width-container">
            <div class="govuk-footer__content-container">
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-one-half">
                        <div class="govuk-footer__content">
                            <h3 class="govuk-heading-s" style="color: #ffffff; margin-bottom: 15px;">Acknowledgements</h3>
                            <p class="govuk-body-xs" style="color: #ffffff; margin-bottom: 10px;">
                                Thanks to our collaborators at <strong>The National Archives</strong> and <strong>Government Legal Department</strong>.
                            </p>
                            <p class="govuk-body-xs">
                                <a href="https://caselaw.nationalarchives.gov.uk/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">Find Case Law</a> â€¢ 
                                <a href="https://www.legislation.gov.uk/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">UK Legislation</a>
                            </p>
                        </div>
                    </div>
                    <div class="govuk-grid-column-one-half">
                        <div class="govuk-footer__content">
                            <p class="govuk-body-s">
                                Built by the <strong>Incubator for AI</strong> for the public good
                            </p>
                            <p class="govuk-body-s">
                                <a href="https://github.com/i-dot-ai/lex" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">GitHub</a> â€¢ 
                                <a href="https://github.com/i-dot-ai/lex/issues/new" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">Report a Bug</a> â€¢ 
                                <a href="https://ai.gov.uk/about/" class="govuk-footer__link" target="_blank" rel="noopener noreferrer">About i.AI</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.mcp-tabs__content');
            contents.forEach(content => {
                content.classList.remove('mcp-tabs__content--active');
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.mcp-tabs__tab');
            tabs.forEach(tab => {
                tab.classList.remove('mcp-tabs__tab--active');
                tab.setAttribute('aria-selected', 'false');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(tabName + '-panel');
            if (selectedContent) {
                selectedContent.classList.add('mcp-tabs__content--active');
            }
            
            // Add active class to selected tab
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.classList.add('mcp-tabs__tab--active');
                selectedTab.setAttribute('aria-selected', 'true');
            }
        }
        
        // Copy to clipboard functionality with proper error handling
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            if (!element) {
                console.error('Element not found:', elementId);
                return;
            }
            
            const text = element.textContent;
            
            // Clean JSON text by preserving structure
            const cleanText = text.trim();
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(cleanText).then(() => {
                    showCopyFeedback(element);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    fallbackCopy(cleanText);
                });
            } else {
                fallbackCopy(cleanText);
            }
        }
        
        function showCopyFeedback(element) {
            const btn = element.parentNode.querySelector('.copy-button');
            if (!btn) return;

            const originalText = btn.textContent;

            btn.textContent = 'âœ“ Copied!';
            btn.classList.add('copied');

            // Announce to screen readers
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'govuk-visually-hidden';
            announcement.textContent = 'Configuration copied to clipboard';
            document.body.appendChild(announcement);

            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('copied');
                document.body.removeChild(announcement);
            }, 2000);
        }
        
        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.top = '-9999px';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                console.log('Fallback copy successful');
            } catch (err) {
                console.error('Fallback copy failed: ', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        // Progressive enhancement check
        if (document.documentElement) {
            document.documentElement.className += ' govuk-frontend-supported';
        }
        
        // Focus management for skip link
        const skipLink = document.querySelector('.govuk-skip-link');
        const mainContent = document.getElementById('main-content');
        
        if (skipLink && mainContent) {
            skipLink.addEventListener('click', function(e) {
                e.preventDefault();
                mainContent.focus();
                mainContent.scrollIntoView({ behavior: 'smooth' });
            });
        }
        
        // Live stats fetching functionality
        async function updateLiveStats() {
            try {
                const response = await fetch('/api/stats');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const stats = await response.json();

                // Update all counts using the flat API response structure
                const elements = {
                    'acts-count': stats.acts_and_sis,
                    'provisions-count': stats.provisions,
                    'judgments-count': stats.court_judgments,
                    'paragraphs-count': stats.case_paragraphs,
                    'explanatory-count': stats.explanatory_sections,
                    'amendments-count': stats.amendments,
                    'pdf-legislation-count': stats.pdf_legislation,
                    'pdf-provisions-count': stats.pdf_provisions
                };

                // Update each element if it exists and has a value
                Object.entries(elements).forEach(([elementId, value]) => {
                    const element = document.getElementById(elementId);
                    if (element && value !== undefined) {
                        element.dataset.finalValue = value;
                        // Only set to 0 if not yet animated, otherwise update directly
                        if (!element.dataset.animated) {
                            element.textContent = '0';
                        } else {
                            element.textContent = value;
                        }
                    }
                });

                // Set up animation observer after stats are loaded
                setupStatsAnimation();

            } catch (error) {
                console.warn('Failed to fetch live stats:', error);
                // Keep static fallback values if API fails
            }
        }

        // Stats animation using Intersection Observer
        function setupStatsAnimation() {
            const statElements = document.querySelectorAll('.stat-number');

            // Check if reduced motion is preferred
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !entry.target.dataset.animated) {
                        entry.target.dataset.animated = 'true';
                        if (prefersReducedMotion) {
                            // Skip animation for accessibility
                            entry.target.textContent = entry.target.dataset.finalValue || entry.target.textContent;
                        } else {
                            animateNumber(entry.target);
                        }
                    }
                });
            }, { threshold: 0.5 });

            statElements.forEach(el => observer.observe(el));
        }

        function animateNumber(element) {
            const finalText = element.dataset.finalValue || element.textContent;
            const finalNumber = parseInt(finalText.replace(/,/g, ''));

            if (isNaN(finalNumber) || finalNumber === 0) {
                element.textContent = finalText;
                return;
            }

            const duration = 500;
            const steps = 30;
            const increment = finalNumber / steps;
            let step = 0;

            const timer = setInterval(() => {
                step++;
                const current = Math.min(Math.round(increment * step), finalNumber);
                element.textContent = current.toLocaleString();

                if (step >= steps) {
                    clearInterval(timer);
                    element.textContent = finalText; // Restore exact original formatting
                }
            }, duration / steps);
        }

        // Update stats on page load and refresh every 30 seconds for live updates
        document.addEventListener('DOMContentLoaded', function() {
            updateLiveStats();

            // Refresh every 30 seconds (30,000 milliseconds) for live updates
            setInterval(updateLiveStats, 30000);
        });

        // Analytics placeholder - track download events
        document.querySelectorAll('a[download]').forEach(function(link) {
            link.addEventListener('click', function() {
                // Analytics tracking would go here
                console.log('Download started:', this.getAttribute('href'));
            });
        });

        // Dark mode toggle functionality
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark-mode');

            document.getElementById('dark-mode-icon').textContent = isDark ? 'Light' : 'Dark';
            localStorage.setItem('darkMode', isDark ? 'true' : 'false');
        }

        // Initialise dark mode on page load
        function initDarkMode() {
            const savedPref = localStorage.getItem('darkMode');
            const systemPref = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedPref === 'true' || (savedPref === null && systemPref)) {
                document.documentElement.classList.add('dark-mode');
                const icon = document.getElementById('dark-mode-icon');
                if (icon) icon.textContent = 'Light';
            }
        }

        // API status check functionality
        async function checkApiStatus() {
            const dot = document.getElementById('status-dot');
            const text = document.getElementById('status-text');

            if (!dot || !text) return;

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);

                const response = await fetch('/healthcheck', { signal: controller.signal });
                clearTimeout(timeoutId);

                if (response.ok) {
                    dot.className = 'status-dot operational';
                    text.textContent = 'All systems operational';
                } else {
                    dot.className = 'status-dot degraded';
                    text.textContent = 'Degraded performance';
                }
            } catch (err) {
                dot.className = 'status-dot down';
                text.textContent = 'Service unavailable';
            }
        }

        // Initialise dark mode and API status on page load
        document.addEventListener('DOMContentLoaded', function() {
            initDarkMode();
            checkApiStatus();
            // Refresh status every 60 seconds
            setInterval(checkApiStatus, 60000);

            // Generate Cursor install deeplink
            generateCursorInstallLink();
        });

        // Generate Cursor MCP install deeplink
        function generateCursorInstallLink() {
            const linkElement = document.getElementById('cursor-install-link');
            if (!linkElement) return;

            // Get the base URL from the page (injected by Jinja)
            const baseUrl = '{{ base_url }}';

            // Create the MCP server configuration
            const config = {
                url: baseUrl + '/mcp'
            };

            // Base64 encode the configuration
            const configJson = JSON.stringify(config);
            const configBase64 = btoa(configJson);

            // Build the Cursor deeplink URL
            const cursorDeeplink = `cursor://anysphere.cursor-deeplink/mcp/install?name=lex&config=${encodeURIComponent(configBase64)}`;

            linkElement.href = cursorDeeplink;
        }
    </script>
</body>
</html>